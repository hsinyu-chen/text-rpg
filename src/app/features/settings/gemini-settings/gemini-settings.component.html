<div class="provider-settings">
    <mat-form-field appearance="outline" class="full-width">
        <mat-label>API Key</mat-label>
        <input matInput [type]="hideKey() ? 'password' : 'text'" [(ngModel)]="apiKey" required>
        <button mat-icon-button matSuffix (click)="hideKey.set(!hideKey())" type="button">
            <mat-icon>{{hideKey() ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
        <mat-label>Model</mat-label>
        <mat-select [(ngModel)]="modelId">
            @for (m of models(); track m.id) {
            <mat-option [value]="m.id">
                {{ m.name }}
            </mat-option>
            }
        </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
        <mat-label>Story Thinking Level (action/fastforward/continue)</mat-label>
        <mat-select [(ngModel)]="thinkingLevelStory">
            @for (level of availableThinkingLevels(); track level) {
            <mat-option [value]="level">{{ getThinkingLevelLabel(level) }}</mat-option>
            }
        </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
        <mat-label>General Thinking Level (system/save/others)</mat-label>
        <mat-select [(ngModel)]="thinkingLevelGeneral">
            @for (level of availableThinkingLevels(); track level) {
            <mat-option [value]="level">{{ getThinkingLevelLabel(level) }}</mat-option>
            }
        </mat-select>
    </mat-form-field>

    <div class="cache-section">
        <mat-slide-toggle [(ngModel)]="enableCache" color="primary">
            Explicit Context Caching
        </mat-slide-toggle>
        <p class="warning-text">
            <mat-icon inline>warning</mat-icon>
            May incur costs on your Google Cloud billing account.
        </p>
    </div>
</div>